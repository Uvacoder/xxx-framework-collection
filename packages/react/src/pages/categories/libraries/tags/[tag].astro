---
import { startCase, kebabCase } from 'lodash'
import { libraries, libraryTags } from '../../../../data/libraries'
import BaseLayout from '../../../../layouts/base.astro'
import { PageHeader } from '@framework/system/src/components/page-header.tsx'
import { LibraryCard } from '@framework/system/src/components/library-card.tsx'
import { sprinkles } from '@framework/system/src/sprinkles/sprinkles.css'

export function getStaticPaths() {
	return libraryTags.map(tag => ({
		params: { 
			tag: kebabCase(tag) 
		}, 
		props: { tag } 
	}))
}

const tag = Astro.props.tag as typeof libraryTags[number]
const selectedLibraries = libraries.filter(library => library.tags.includes(tag))
const title = `React ${startCase(tag)} libraries`
---
<head>
	<meta name="description" content={`Browse ${title}`}/>
</head>
<BaseLayout title={title}>
	<div class={sprinkles({ layout: "landscapeCardGrid", gap: 24 })}>
		<PageHeader title={title} count={selectedLibraries.length} />
		{selectedLibraries.map(library => {
			return <LibraryCard library={library} headingTag="h2" />
		})}
	</div>
</BaseLayout>