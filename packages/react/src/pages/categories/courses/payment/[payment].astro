---
import { startCase, kebabCase } from 'lodash'
import { coursePaymentTypes } from '@framework.dev/system/src/models/course'
import { PageHeader } from '@framework.dev/system/src/components/page-header'
import { CourseCard } from '@framework.dev/system/src/components/course-card'
import { sprinkles } from '@framework.dev/system/src/sprinkles/sprinkles.css'
import { courses } from '../../../../data/courses'
import BaseLayout from '../../../../layouts/base.astro'

export function getStaticPaths() {
	return coursePaymentTypes.map(paymentType => ({
		params: { 
			payment: kebabCase(paymentType) 
		}, 
		props: { paymentType } 
	}))
}

const paymentType = Astro.props.paymentType as typeof coursePaymentTypes[number]
const selectedCourses = courses.filter(course => course.paymentType === paymentType)
const title = `${startCase(paymentType)} React Courses`
---
<head>
	<meta name="description" content={`Browse ${title}`}/>
</head>
<BaseLayout title={title}>
	<div class={sprinkles({ layout: "landscapeCardGrid", gap: 24 })}>
		<PageHeader title={title} count={selectedCourses.length} />
		{selectedCourses.map(course => {
			return <CourseCard course={course} headingTag="h2" />
		})}
	</div>
</BaseLayout>